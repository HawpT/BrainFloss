{% extends 'base.html' %}
{% load staticfiles %}

{% block content %}

<!DOCTYPE html>
<html>
<head>
    
<div class="container">
    <div class="row">
        <div class="jumbotron">
            <h1>Hello, Teacher!</h1>
            
            
            
               <span style="color:#FF3D3D"> <h1>Check Your Student's Stats Here</h1></span>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<body>
    
  <h2><span style= "color:blue">Student Search Selection:</span></h2>

<div class="container">
  <a>
    <button href="" type="button" >Choose all students</button>
  </a>
</div>

<br><br>

<div class="container">
  <div class="dropdown">
    <button id="allstudents" class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Choose a student to view their stats
    <span class="caret"></span></button>

    <ul class="dropdown-menu">
      {% block results %}
        {% for el in studentform %}
          <li><a href="#studentselector">{{el.first_name}} {{el.last_name}}</a></li>
        {% endfor %}
      {% endblock %}
    </ul>
  </div>
</div>

<br><br>

<h2>Latest scores:</h2>

<br><br>
<script>
  $(document).ready(function() {
    $('.dropdown-menu').clicked(function () {
      var name = $(this).val();
      var temp = name.split();
      $.ajax({
        type: "POST",
        url: "",
        data: {
          fname: temp[0],
          lname: temp[1]
        },
        success: function (json) {
          console.log("Received JSON: " + json);
        },
        error: function () {
          console.log("Error retrieving scores.");
        }
      })
    })
  })
</script>
<table id="scorereport" style="width:35%">
  {% block allscores %}
    {% for student in studentform %}
      {% for score in scoreform %}
        {% if score.student_id == student.student_id %}
          <tr>
            <td>{{student.first_name}} {{student.last_name}}</td>

            <!--Dynamic Problem Types-->
            {% if score.problem_type == 1 %}
            <td>Level {{score.problem_level}} Addition</td>
            {% endif %}
            {% if score.problem_type == 2 %}
            <td>Level {{score.problem_level}} Subtraction</td>
            {% endif %}
            {% if score.problem_type == 3 %}
            <td>Level {{score.problem_level}} Digits</td>
            {% endif %}

            <!--Dynamic Problem Output-->
            {% if score.problem_type == 1 %}
            <td>{{score.op1}} + {{score.op2}} = {{score.student_answer}}</td>
            {% endif %}
            {% if score.problem_type == 2 %}
            <td>{{score.op1}} - {{score.op2}} = {{score.student_answer}}</td>
            {% endif %}
            {% if score.problem_type == 3 %}
            <td>Not yet implemented</td>
            {% endif %}

          </tr>
        {% endif %}
      {% endfor %}
    {% endfor%}
  {% endblock %}
</table>

<br>
    
    
          
               
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load('current', {packages: ['corechart', 'bar']});
  google.charts.setOnLoadCallback(drawBarColors);

  function drawBarColors() {
    var data = google.visualization.arrayToDataTable([
      ['Student', 'Level 1 add', 'Level 2 add', 'Level 3 add','Level 1 sub', 'Level 2 sub', 'Level 3 sub'],
      ['Sarah', 89, 67, 45, 78, 67, 54],
      ['Larry', 88, 78, 66, 67, 56, 45],
      ['Mary', 100, 100, 100, 100, 100, 100],

    ]);

    var options = {
      title: 'Student Scores',
      legend: "top",
      chartArea: {width: '75%'},
      colors: ['#b0120a', '#ffab91', "#ffab30", "#00FFFF", "#afcb22", "#dadb10"],
      hAxis: {
        title: 'Score',
        minValue: 0
      },
      vAxis: {
        title: 'Student Name'
      }
    };
    var chart = new google.visualization.BarChart(document.getElementById('chart_div'));
    chart.draw(data, options);


    // Set chart options
    var options = {'title':'Percentages Based on Cumulative Scores: ',
      legend: 'Top',
                   };

    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.PieChart(document.getElementById('pie_chart'));
    chart.draw(data, options);
  }


</script>
  </head>
  <body>
     <!--Div that will hold the pie chart-->
    <div id="pie_chart" style="width:1100px; height:500px;"></div>
    <div id="chart_div" style="width: 1100px; height: 500px;"></div>
  </body>

                       
                        
                        
                      
               
              
               


                </span>
                
            
            </body>
            
         
        </div>
    </div>
</div>
</body>
</html>
{% endblock %}


